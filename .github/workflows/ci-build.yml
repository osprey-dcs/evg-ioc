name: EVG

on: [push, pull_request, workflow_dispatch]

env:
  SETUP_PATH: .ci-local:.ci
  CMP: gcc
  SET: feed
  BCFG: default
  BASE: "7.0"

jobs:
  native:
    runs-on: ubuntu-latest
    steps:

    - uses: actions/checkout@v4
      with:
        submodules: true

    - name: "apt-get install"
      run: |
        sudo apt-get update
        sudo apt-get -y install libreadline-dev python3

    - name: Prepare and compile dependencies
      run: python .ci/cue.py prepare

    - name: Build main module
      run: python .ci/cue.py build
